/**
 * New node file
 */

function run(strInputFile, strOutputFile, objTask) {
	
	objProfile = getProfile(objTask.profile);
	
	switch (objProfile.tool) {
	case 'ffmpeg':
		var encode = require('./Ffmpeg');
		encode.loadParameters(objProfile.presets);
		encode.run(strInputFile, strOutputFile);
		break;
	default:
		throw new Error('Encode method not available');
	}
}

function getProfile(intIdProfile) {
	reg = new RegExp(/%PROFILE_NAME%/gi);
	strProfilePath = strProfilePath.replace(reg, intIdProfile);
	
	return File.loadJson(strProfilePath);
}

module.exports = {
	run : run
};
